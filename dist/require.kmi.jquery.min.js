(function(){function a(c,d){if(d=d||'','string'!=typeof c)throw{code:'BADTYPE',message:'Module path must be a String.'};if('string'!=typeof d)throw{code:'BADTYPE',message:'Module caller_folder must be a String.'};var e=c.substring(c.lastIndexOf('/'));if(-1===e.indexOf('.')?(e='js',c=`${c}.js`):e=e.substring(e.lastIndexOf('.')+1),a.modules[c])return a.modules[c].exports;var f=a.getHandler(e),g={exports:{},path:c,caller_folder:d};if(f){var h=f(c,g);return!1===h?void 0:(g.disposable||(a.modules[c]=g),g.exports)}throw{code:'UNKEXT',message:`Unknown Extension ${e} for ${c}`}}function b(c){var d=new XMLHttpRequest;return d.open('GET',c,!1),d.send(null),'file'===c.substring(0,7)&&(d.status=d.status?404:200),d}a.resolve=(c,d,e)=>{if('http://'===c.substr(0,7)||'https://'===c.substr(0,8))return c;if('$'===c[0]&&(d=e,c=c.substring(1)),'.'===c[0]&&'.'===c[1]&&'/'===c[2]){for(;'.'===c[0]&&'.'===c[1]&&'/'===c[2];)d=d.substring(0,d.lastIndexOf('/')),c=c.substring(3);return`${d}/${c}`}return'.'===c[0]&&'/'===c[1]?`${d}/${c.substr(2)}`:'/'===c[0]?c:`cami_modules/${c}`},a.handlers={js:(c,d)=>{var f,e=a.bundles[c];if(e||(e=a.bundles[`${c.substring(0,c.length-3)}/index.js`],e&&(f=c.substring(0,c.length-3))),!e){var g=b(c);if(404===g.status&&(c=`${c.substring(0,c.length-3)}/index.js`,g=b(c)),404===g.status)throw{code:'MODULE_NOT_FOUND',message:`Module '${c}' not found.`};var h=g.responseText;f=c.substring(0,c.lastIndexOf('/'));try{var i=new Function(['require','__dirname','module','exports','caller_folder'],h);i.name=c}catch(k){console.log(`${k.name} on ${c} => ${k.message} at line ${j.substring(j.indexOf('at ')+3,j.length)}`),console.log(k.stack)}}else var i=e;try{i(k=>a(a.resolve(k,f,d.caller_folder),f),f,d,d.exports,d.caller_folder)}catch(k){var j=k.stack.split('\n')[5];console.log(`${k.name} on ${c} => ${k.message} at line ${j.substring(j.indexOf('at ')+3,j.length)}`),console.log(k.stack)}},css:(c,d)=>{$('head').append(`<link rel="stylesheet" type="text/css" href="${c}">`),d.exports={type:'css',path:c}},html:(c,d)=>{var e=b(c),f=e.responseText;if(404===e.status)throw{code:'MODULE_NOT_FOUND',message:`Module '${c}' not found.`};d.exports=$(f),d.disposable=!0},img:(c,d)=>{d.exports=$(`<img src="${c}">`),d.disposable=!0},jpg:'img',png:'img',gif:'img',json:(c,d)=>{var e=b(c);if(404===e.status)throw{code:'MODULE_NOT_FOUND',message:`Module '${c}' not found.`};d.exports=JSON.parse(e.responseText),d.disposable=!0}},a.setHandler=(c,d)=>a.handlers[c.toLowerCase()]=d,a.getHandler=c=>{var d=a.handlers[c.toLowerCase()];return'string'==typeof d?a.getHandler(d):d},a.modules={},a.bundles={},$(function(){var c=$('meta[cami-init]').attr('cami-init');c&&a(c)})})();